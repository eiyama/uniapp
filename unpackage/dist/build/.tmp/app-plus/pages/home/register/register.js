(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/register/register"],{"0960":function(e,a,t){"use strict";var n=t("19ba"),i=t.n(n);i.a},"19ba":function(e,a,t){},"23ee":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement;e._self._c},i=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return i})},"2d61":function(e,a,t){"use strict";(function(e){t("db55"),t("921b");n(t("66fd"));var a=n(t("d37a"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])},"397e":function(e,a,t){"use strict";t.r(a);var n=t("54e4"),i=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(a,e,function(){return n[e]})}(o);a["default"]=i.a},"54e4":function(e,a,t){"use strict";(function(e,n){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,o=t("524e"),s=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"5079"))},r=null,d=[],u=0,h=0;e.getSystemInfo({success:function(e){u=e.windowWidth,h=e.windowHeight}});var l={data:function(){return{signImage:"",isEnd:!1,appId:"",rightImg:"/static/images/right.png",uploadIcon:"/static/images/upload.png",organizationData:[],organizationValue:"",organizationCode:[],phoneNumber:"",userName:"",typeData:[["个人"],["中华人民共和国身份证","港澳居民来往内地通行证","台胞证","士兵证/军官证/警官证","中国护照","外国护照"]],typeValue:"",updata:{orgCode:"",userName:""},idCardImage:"/static/images/upload.png",idCardBackImage:"/static/images/upload.png",bankCardImage:"/static/images/upload.png",idCardBackId:"",idCardId:"",bankCardId:"",idCardNumber:"",birthdayValue:"",sexArr:[{name:"男"},{name:"女"}],Gender:"",nationData:["汉族","蒙古族","回族","藏族","维吾尔族","苗族","彝族","壮族","布依族","朝鲜族","满族","侗族","瑶族","白族","土家族","哈尼族","哈萨克族","傣族","黎族","傈僳族","佤族","畲族","高山族","拉祜族","水族","东乡族","纳西族","景颇族","柯尔克孜族","土族","达斡尔族","仫佬族","羌族","布朗族","撒拉族","毛南族","仡佬族","锡伯族","阿昌族","普米族","塔吉克族","怒族","乌孜别克族","俄罗斯族","鄂温克族","德昂族","保安族","裕固族","京族","塔塔尔族","独龙族","鄂伦春族","赫哲族","门巴族","珞巴族","基诺族"],nationValue:"",bankCardNum:"",openBankData:[],openBankCode:[],openBankValue:"",openBranchBank:"",referrerMobile:"",postData:{personal:{name:"",gender:"",nation:"",identityType:"",identityNo:"",birthDay:"",maritalStatus:"",politicalStatus:"",educationLevel:"",mobile:"",orgCode:"",userId:""},bankCard:{openBank:"",openBranchBank:"",bankCardNo:""},idPhotoBase:{idCardFrontMediaId:"",idCardContraryMediaId:"",bankCardMediaId:""},referrer:{referrerMobile:""},signature:{signatureMediaId:""},salesmanConfigId:""},signatureMediaId:"",salesmanConfigId:"",agreements:[],plates:"",hasAgreements:!1,hasPersonal:!1,hasReferrer:!1,hasBankCard:!1,hasIDPhoto:!1,hasSignature:!1,IdentityType:"",opBankCode:""}},components:{uniPopup:s},onLoad:function(){var a=this;i=this,r=wx.createCanvasContext("firstCanvas"),r.setStrokeStyle("#000"),r.setLineWidth(4),r.setLineCap("round"),r.setLineJoin("round"),e.getStorageSync("appId")&&(this.appId=e.getStorageSync("appId")),o.http.get("/Organizations/Shops").then(function(e){e.result&&e.result.map(function(e){a.organizationData.push(e.fullName),a.organizationCode.push(e.code)})}),o.http.get("/Banks").then(function(e){e.result&&e.result.map(function(e){a.openBankData.push(e.shortName),a.openBankCode.push(e.bankCode)})}),o.http.get("/Configurations?types=salesman").then(function(e){e.result&&a.initData(e)})},methods:{bindTimeChange:function(e){this.organizationValue=this.organizationData[e.detail.value],this.orgCode=this.organizationCode[e.detail.value],console.log(n(this.orgCode," at pages\\home\\register\\register.vue:362"))},typeChange:function(e){var a=e.detail.value[1]?e.detail.value[1]:0;this.typeValue=this.typeData[0][0]+"-"+this.typeData[1][a],this.IdentityType=this.Common.Public.cardTypeChange(this.typeData[0][0],this.typeData[1][a])[1],console.log(n(this.IdentityType," at pages\\home\\register\\register.vue:369"))},upIdcard:function(){var a=this,t=this;e.chooseImage({success:function(i){var o=i.tempFilePaths;t.idCardImage=o[0],e.uploadFile({url:"/Documents/EnquiryPolicy",filePath:o[0],name:"file",header:{"x-appid":a.appId},success:function(e){var a=JSON.parse(e.data);t.idCardId=a.result[0].id,console.log(n(t.idCardId," at pages\\home\\register\\register.vue:387"))}})}})},upIdcardBack:function(){var a=this,t=this;e.chooseImage({success:function(n){var i=n.tempFilePaths;t.idCardBackImage=i[0],e.uploadFile({url:"/Documents/EnquiryPolicy",filePath:i[0],name:"file",header:{"x-appid":a.appId},success:function(e){var a=JSON.parse(e.data);t.idCardBackId=a.result[0].id}})}})},upBankcard:function(){var a=this,t=this;e.chooseImage({success:function(n){var i=n.tempFilePaths;t.bankCardImage=i[0],e.uploadFile({url:"/Documents/EnquiryPolicy",filePath:i[0],name:"file",header:{"x-appid":a.appId},success:function(e){var a=JSON.parse(e.data);t.bankCardId=a.result[0].id}})}})},birthdayChange:function(e){this.birthdayValue=e.detail.value},addBirth:function(){this.birthdayValue=this.Common.Public.checkBirthday(this.idCardNumber)[1]},radioChange:function(e){this.Gender=e.detail.value},nationChange:function(e){this.nationValue=this.nationData[e.detail.value]},openBankChange:function(e){this.openBankValue=this.openBankData[e.detail.value],this.opBankCode=this.openBankCode[e.detail.value]},openSign:function(){this.$refs.popup.open()},closePup:function(){this.$refs.popup.close()},initData:function(e){if(200==e.status&&e.result&&e.result.salesman){if(this.salesmanConfigId=e.result.salesman.id,this.agreements=e.result.salesman.agreements,this.plates=e.result.salesman.plates,this.plates&&this.plates.length>0)for(var a=0;a<this.plates.length;a++)"Personal"==this.plates[a]&&(this.hasPersonal=!0),"Referrer"==this.plates[a]&&(this.hasReferrer=!0),"BankCard"==this.plates[a]&&(this.hasBankCard=!0),"IDPhoto"==this.plates[a]&&(this.hasIDPhoto=!0),"Signature"==this.plates[a]&&(this.hasSignature=!0),"Agreement"==this.plates[a]&&(this.hasAgreements=!0)}else this.hasPersonal=!1,this.hasReferrer=!1,this.hasBankCard=!1,this.hasIDPhoto=!1,this.hasSignature=!1,this.hasAgreements=!1},submitData:function(){var a=this;if(a.hasIDPhoto){if(""==a.idCardId)return e.showToast({title:"请上传身份证正面图片",duration:2e3,icon:"none"}),!1;if(""==a.idCardBackId)return e.showToast({title:"请上传身份证背面图片",duration:2e3,icon:"none"}),!1;if(""==a.bankCardId)return e.showToast({title:"请上传银行卡背面图片",duration:2e3,icon:"none"}),!1}if(a.hasPersonal){if(!a.userName)return e.showToast({title:"请填写姓名",duration:2e3,icon:"none"}),!1;if(!a.IdentityType)return e.showToast({title:"请选择证件类型",duration:2e3,icon:"none"}),!1;if(!a.idCardNumber)return e.showToast({title:"请输入证件号码",duration:2e3,icon:"none"}),!1;if(!a.birthdayValue)return e.showToast({title:"请选择出生日期",duration:2e3,icon:"none"}),!1;if(!a.Gender)return e.showToast({title:"请选择性别",duration:2e3,icon:"none"}),!1;if(!a.nationValue)return e.showToast({title:"请选择民族",duration:2e3,icon:"none"}),!1;if(!a.phoneNumber)return e.showToast({title:"请输入手机号码",duration:2e3,icon:"none"}),!1;var t=/^((\+?86)|(\(\+86\)))?(19[0123456789][0-9]{8}|17[0123456789][0-9]{8}|13[0123456789][0-9]{8}|15[012356789][0-9]{8}|18[012356789][0-9]{8}|147[0-9]{8}|1349[0-9]{7})$/;if(!t.test(a.phoneNumber))return void e.showToast({title:"手机号码不正确",duration:2e3,icon:"none"});a.postData.personal.name=a.userName,a.postData.personal.gender=a.Gender,a.postData.personal.nation=a.nationValue,a.postData.personal.identityType=a.IdentityType,a.postData.personal.identityNo=a.idCardNumber,a.postData.personal.birthDay=a.birthdayValue,a.postData.personal.maritalStatus=a.organizationValue,a.postData.personal.mobile=a.phoneNumber,a.postData.personal.orgCode=a.orgCode}if(a.hasIDPhoto&&(this.postData.idPhotoBase.bankCardMediaId=this.bankCardId,this.postData.idPhotoBase.idCardContraryMediaId=this.idCardBackId,this.postData.idPhotoBase.idCardFrontMediaId=this.idCardId),a.hasBankCard){if(!a.openBankValue)return e.showToast({title:"请选择银行",duration:2e3,icon:"none"}),!1;if(!a.bankCardNum)return e.showToast({title:"请输入银行卡号",duration:2e3,icon:"none"}),!1;if(!a.openBranchBank)return e.showToast({title:"请输入开户支行",duration:2e3,icon:"none"}),!1;a.postData.bankCard.openBank=a.opBankCode,a.postData.bankCard.openBranchBank=a.openBranchBank,a.postData.bankCard.bankCardNo=a.bankCardNum}if(a.hasReferrer){if(!a.signatureMediaId)return e.showToast({title:"请输入推荐人号码",duration:2e3,icon:"none"}),!1;a.postData.referrer.referrerMobile=a.referrerMobile}if(a.hasSignature){if(!a.signatureMediaId)return e.showToast({title:"请签名",duration:2e3,icon:"none"}),!1;a.postData.signature.signatureMediaId=a.signatureMediaId}a.postData.salesmanConfigId=a.salesmanConfigId,console.log(n(a.postData," at pages\\home\\register\\register.vue:684")),e.showLoading({title:"加载中"}),o.http.post("/Salesmans",a.postData).then(function(a){e.hideLoading(),a.status})},overSign:function(){if(this.isEnd){var a=this;e.canvasToTempFilePath({canvasId:"firstCanvas",success:function(e){i.signImage=e.tempFilePath;var t={};t.dataURIString=e.tempFilePath,o.http.post("/Documents?folderName=SalesmanApply",t).then(function(e){e.result&&(a.signatureMediaId=e.result.id,a.$refs.popup.close())})}})}else e.showToast({title:"请先完成签名",icon:"none",duration:1500,mask:!0})},start:function(e){console.log(n("触摸开始"+e.changedTouches[0].x," at pages\\home\\register\\register.vue:728")),console.log(n("触摸开始"+e.changedTouches[0].y," at pages\\home\\register\\register.vue:729"));var a={x:e.changedTouches[0].x,y:e.changedTouches[0].y};d.push(a)},move:function(e){var a={x:e.touches[0].x,y:e.touches[0].y};d.push(a),d.length>=2&&this.draw(d)},end:function(e){console.log(n("触摸结束"+e," at pages\\home\\register\\register.vue:754")),this.isEnd=!0;for(var a=0;a<d.length;a++)d.pop()},cancel:function(e){console.log(n("触摸取消"+e," at pages\\home\\register\\register.vue:766"))},tap:function(e){console.log(n("长按手势"+e," at pages\\home\\register\\register.vue:771"))},error:function(e){console.log(n("画布触摸错误"+e," at pages\\home\\register\\register.vue:775"))},draw:function(e){console.log(n(e[0],e[1]," at pages\\home\\register\\register.vue:780"));var a=e[0],t=e[1];e.shift(),r.moveTo(a.x,a.y),r.lineTo(t.x,t.y),r.stroke(),r.draw(!0)},clearClick:function(){this.isEnd=!1,r.clearRect(0,0,u,h),r.draw(!0)}}};a.default=l}).call(this,t("6e42")["default"],t("0de9")["default"])},d37a:function(e,a,t){"use strict";t.r(a);var n=t("23ee"),i=t("397e");for(var o in i)"default"!==o&&function(e){t.d(a,e,function(){return i[e]})}(o);t("0960");var s=t("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"09cd488b",null);a["default"]=r.exports}},[["2d61","common/runtime","common/vendor"]]]);